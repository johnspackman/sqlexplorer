<?xml version="1.0"?>
<!--
	Ant build file SQLExplorer P2 meta data
	$Id$
-->
<project default="dist" name="sqlexplorer_feature_patch" basedir=".">

	<!-- project info -->
	<property name="Name" value="SQLExplorer" />
	<property name="name" value="sqlexplorer" />
	<property name="year" value="2011" />

	<!-- first match sets the property -->
	<property file="build_dist.properties" />
	<property file="../build.properties" />
	<property file="${user.home}/build.properties" />

	<!-- my defaults -->
	<property name="feature.export.dir" value="../sqlexplorer_feature/exported" />
	<property name="updatesite.project" value="../sqlexplorer_updatesite" />
	<property name="se.project" value="../sqlexplorer" />
	<property name="export.dir" value="dist/exported" />
	<property name="se.version" value="3.6.1" />
	<property name="se.rcp.dir" value="SQLExplorer" />
		
	
	<!-- =============================================================== -->
	<!-- E N V I R O N M E N T                                           -->
	<!-- =============================================================== -->

	<target name="display.properties" description="Display common properties values">
		<echo>
			[JAVA]
			os.name             = ${os.name}
			java.class.path     = ${java.class.path}
			java.home           = ${java.home}
			user.home           = ${user.home}
			[ANT]
			ant.home            = ${ant.home}
			build.sysclasspath  = ${build.sysclasspath}
			[PROJECT]
			updatesite.project  = ${updatesite.project}
			se.project          = ${se.project}
		</echo>
	</target>

	<target name="usage">
		<echo message="Run ant -projecthelp to get a list of targets to run" />
	</target>


	<!-- =============================================================== -->
	<!-- dist                                                              -->
	<!-- =============================================================== -->

	<target name="dist" description="build all zip's for patchdistribution" depends="display.properties">
		<mkdir dir="dist"/>
		<zip destfile="dist/plugin.zip" >
			<fileset dir="exported">
				<include name="**/*.sqlexplorer*"/>
			</fileset>
		</zip>
		<zip destfile="dist/xml.zip">
			<fileset dir="${updatesite.project}">
				<include name="site.xml"/>
				<include name="artifacts.xml"/>
				<include name="content.xml"/>
			</fileset>
		</zip>
	</target>
	
</project>
