<?xml version="1.0"?>
<!--
	Ant build file SQLExplorer P2 meta data
	$Id$
-->
<project default="dist" name="sqlexplorer_rcp" basedir=".">

	<!-- project info -->
	<property name="Name" value="SQLExplorer" />
	<property name="name" value="sqlexplorer" />
	<property name="year" value="2009" />

	<!-- first match sets the property -->
	<property file="build_dist.properties" />
	<property file="../build.properties" />
	<property file="${user.home}/build.properties" />

	<!-- my defaults -->
	<property name="updatesite.project" value="../sqlexplorer_updatesite" />
	<property name="se.project" value="../sqlexplorer" />
		
	
	<!-- =============================================================== -->
	<!-- E N V I R O N M E N T                                           -->
	<!-- =============================================================== -->

	<target name="display.properties" description="Display common properties values">
		<echo>
			[JAVA]
			os.name             = ${os.name}
			java.class.path     = ${java.class.path}
			java.home           = ${java.home}
			user.home           = ${user.home}
			[ANT]
			ant.home            = ${ant.home}
			build.sysclasspath  = ${build.sysclasspath}
			[PROJECT]
			updatesite.project  = ${updatesite.project}
			se.project          = ${se.project}
		</echo>
	</target>

	<target name="usage">
		<echo message="Run ant -projecthelp to get a list of targets to run" />
	</target>


	<!-- =============================================================== -->
	<!-- dist                                                              -->
	<!-- =============================================================== -->

	<target name="dist" depends="display.properties">
		<zip destfile="dist/plugin.zip">
			<fileset dir="${updatesite.project}">
				<include name="**/*.sqlexplorer*"/>
			</fileset>
			<fileset dir="${se.project}">
				<include name="change_log.txt"/>
			</fileset>
		</zip>
		<zip destfile="dist/xml.zip">
			<fileset dir="${updatesite.project}">
				<include name="site.xml"/>
				<include name="artifacts.xml"/>
				<include name="content.xml"/>
			</fileset>
		</zip>
		<zip destfile="dist/rcp.zip">
			<fileset dir="dist/exported">
				<include name="**/*.sqlexplorer*"/>
			</fileset>
		</zip>
	</target>

</project>
